{% extends "layout.html" %}

{% block title %}Project Detail{% endblock %}

{% block content %}
<div>
    <h1>Project Detail</h1>
    <form class="form" id="project-form" method="post" style="margin-top: 15px; width: 100%;">

        {% csrf_token %}
        <div class="" style="display: flex; gap: 10px">
            <div class="div-name" style="width: 500px;">
                <label for="">Project Name</label>
                <input type="text" placeholder="project name" value="{{ project.name }}">
            </div>

            <div class="div-start-date">
                <label for="">Start Date</label>
                <input type="date" placeholder="start-date" style="width: 150px;"
                    value="{{ project.start_date|date:'Y-m-d' }}">
            </div>

            <div class="div-due-date">
                <label for="">Due Date</label>
                <input type="date" placeholder="due-date" style="width: 150px;"
                    value="{{ project.due_date|date:'Y-m-d' }}">
            </div>
        </div>

        <label for="">Description</label>
        <textarea placeholder="description" rows="4"> {{project.description}} </textarea>

        <label for="">Project Manager</label>
        <select style="width: 320px; height: 30px;">
            <option value="{{ project.manager__id }}"> {{project.manager_full_name}} </option>
        </select>

        <label for="">Select Staff</label>
        <select style="width: 320px; height: 30px;">
            <option value="{{ project.staff__id }}"> {{project.manager_full_name}} </option>
        </select>

        <button type="submit" style="width: 80px;">Save</button>
    </form>
</div>

<br />
<br />

<div>
    <div class="head">
        <h2>Employee in this project</h2>
    </div>
    {% for emp in employee_in_this_project %}
    <div class="itemGroup">
        <div class="item">
            <!-- id ของพนักงาน ชื่อ นามสกุล -->
            <div>{{ emp.id }} {{ emp.first_name }} {{emp.last_name}}</div>

            <!-- position name -->
            <div>{{ emp.position.name }}</div>
            <div class="action">

                <!-- function removeStaff ให้ส่ง id ของพนักงาน เช่น removeStaff(Number('{{ staff.id }}'))-->
                <button type="submit" class="delete" onclick="removeStaff({{ project.id }}, {{ emp.id }}, '{{ csrf_token }}')">Kick this Staff</button>

            </div>
        </div>
    </div>
    {% endfor %}


</div>
{% endblock %}